# 内建函数

在编程语言的语境中，“内建函数”指的是**编程语言本身提供、无需额外定义或导入即可直接使用的函数**。

它们也被称为“内置函数”或“原生函数”。

---

### 1. 核心定义与特征

**内建函数**是编程语言标准规范的一部分，与语言引擎（如 JavaScript 的 V8）紧密集成，在全局作用域中直接可用。

**核心特征：**
1.  **开箱即用：** 无需 `import` 或 `require`，在代码的任何地方都可以直接调用。
2.  **高性能：** 它们通常由底层语言（如 C/C++）实现，并经过高度优化，执行效率远高于用 JavaScript 编写的同等功能函数。
3.  **语言核心组成部分：** 它们提供了最基础、最常用的功能，是构建复杂程序的基石。

---

### 2. 在 JavaScript 中的分类与举例

JavaScript 中的内建函数非常丰富，主要可以分为以下几类：

#### a) 全局函数（Global Functions）
这些函数属于全局对象（在浏览器中是 `window`，在 Node.js 中是 `global`），可以直接调用。

*   `parseInt()`, `parseFloat()`: 将字符串转换为整数或浮点数。
*   `isNaN()`, `isFinite()`: 判断一个值是否为 NaN 或是否为有限数。
*   `encodeURI()`, `decodeURI()`, `encodeURIComponent()`, `decodeURIComponent()`: 用于 URI 的编码和解码。
*   `eval()`: 将一个字符串作为 JavaScript 代码执行。（**注意：由于安全和性能问题，应避免使用**）

```javascript
console.log(parseInt("123abc")); // 123
console.log(isNaN(NaN)); // true
console.log(encodeURIComponent("hello world&")); // "hello%20world%26"
```

#### b) 内建对象的方法（Methods of Built-in Objects）
这些函数作为特定内建对象的属性（方法）存在。

**Object**
*   `Object.keys()`, `Object.values()`, `Object.entries()`: 获取对象自身的可枚举属性。
*   `Object.assign()`: 用于对象的浅拷贝。
*   `Object.create()`: 使用指定的原型对象和属性创建一个新对象。

```javascript
const obj = { a: 1, b: 2 };
console.log(Object.keys(obj)); // ['a', 'b']
const copy = Object.assign({}, obj);
```

**Array**
*   `Array.isArray()`: 判断一个值是否为数组。
*   `Array.from()`: 从类数组对象或可迭代对象创建一个新的数组实例。
*   `Array.of()`: 创建一个具有可变数量参数的新数组实例。

```javascript
console.log(Array.isArray([1, 2])); // true
console.log(Array.from("hello")); // ['h', 'e', 'l', 'l', 'o']
console.log(Array.of(1, 2, 3)); // [1, 2, 3]
```

**其他内建对象的方法**
*   `String.prototype.split()`, `String.prototype.includes()`, `String.prototype.replace()`
*   `Number.prototype.toFixed()`, `Number.prototype.toString()`
*   `Math.max()`, `Math.min()`, `Math.random()`, `Math.floor()` (注意：`Math` 是一个内建对象，其方法也是静态的)
*   `JSON.parse()`, `JSON.stringify()`

```javascript
console.log("hello".includes("ell")); // true
console.log(Math.max(1, 5, 3)); // 5
const objStr = JSON.stringify({ name: "Alice" });
console.log(JSON.parse(objStr)); // { name: 'Alice' }
```

#### c) 构造函数（Constructors）
用于创建特定类型对象的函数，通常使用 `new` 关键字调用。

*   `Object()`, `Array()`, `String()`, `Number()`, `Boolean()`, `Function()`, `Date()`, `RegExp()`, `Error()`

```javascript
const now = new Date();
const regex = new RegExp("\\d+", "g");
```

---

### 3. 内建函数与自定义函数、第三方库函数的区别

| 特性 | 内建函数 | 自定义函数 | 第三方库函数 (如 Lodash) |
| :--- | :--- | :--- | :--- |
| **来源** | 语言规范/引擎 | 开发者自己编写 | 外部库 |
| **可用性** | 全局，无需导入 | 需在定义之后或通过模块导入 | 需通过 `import`/`require` 导入 |
| **性能** | **通常最高** (原生实现) | 依赖代码质量 | 通常较高 (经过优化) |
| **维护** | 由语言委员会/引擎团队维护 | 由开发者自己维护 | 由库的维护者负责 |

---
### 4. 进阶：如何判断一个函数是否为内建函数？

一个简单的方法是查看其 `toString()` 的结果。内建函数通常输出 `[native code]`。

```javascript
console.log(Array.prototype.map.toString());
// 输出: "function map() { [native code] }"

// 对比一个自定义函数
function myFunc() {}
console.log(myFunc.toString());
// 输出: "function myFunc() {}"
```
